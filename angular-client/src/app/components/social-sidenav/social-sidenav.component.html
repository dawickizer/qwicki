<mat-drawer-container class="example-container" autosize>
    <mat-drawer #drawer class="example-sidenav" mode="over">
        <h1>Hello, {{host.username}}</h1>
        <mat-divider></mat-divider>
        <br>
        <br>
        <form class="home-form" (ngSubmit)="sendFriendRequest()">
            <mat-form-field class="home-full-width">
              <mat-label>Send Friend Request</mat-label>
              <input matInput [(ngModel)]="potentialFriend" name="sendFriendRequest">
            </mat-form-field>
        </form>   
        <form class="home-form">
            <mat-form-field class="home-full-width">
              <mat-label>Friends</mat-label>
              <input matInput (keyup)="filter($event)" name="filter">
            </mat-form-field>
        </form>  
        
        <h1><span style="color:rgb(0, 162, 255)">friend requests</span></h1>
        <mat-divider></mat-divider>
 
        <table mat-table [dataSource]="inboundFriendRequests" class="mat-elevation-z0">

            <ng-container matColumnDef="username">
            <td mat-cell *matCellDef="let element"> {{element.from.username}} </td>
            </ng-container>

            <ng-container matColumnDef="reject">
                <td mat-cell *matCellDef="let element">
                    <span (click)="rejectFriendRequest(element)" class="material-icons">close</span>
                </td>
            </ng-container>

            <ng-container matColumnDef="accept">
                <td mat-cell *matCellDef="let element">
                    <span (click)="acceptFriendRequest(element)" class="material-icons">done</span>
                </td>
            </ng-container>
        
            <tr mat-row *matRowDef="let row; columns: inboundFriendRequestsDisplayedColumns;"></tr>
        </table>
        <br>
        <br>            

        <h1><span style="color:rgb(0, 255, 149)">online</span></h1>
        <mat-divider></mat-divider>
 
        <table mat-table [dataSource]="onlineFriends" class="mat-elevation-z0">
            <ng-container matColumnDef="username">
                <td mat-cell *matCellDef="let element"> 
                    <mat-expansion-panel class="mat-elevation-z0" hideToggle>
                        <mat-expansion-panel-header>
                            {{element.username}}
                        </mat-expansion-panel-header>
                        <ng-template matExpansionPanelContent>
                            <mat-form-field class="onlineInput">
                                <mat-label>Chat</mat-label>
                                <textarea cdkTextareaAutosize matInput maxlength="250" #onlineInput></textarea>
                                <mat-hint class="onlineHint" align="end">{{onlineInput.value.length || 0}}/250</mat-hint>
                            </mat-form-field>
                            <span matTooltip="Send Message" matTooltipPosition="right" (click)="sendMessage(element, onlineInput)" class="material-icons">send</span>
                        </ng-template>
                    </mat-expansion-panel>
                </td>
            </ng-container>

            <ng-container matColumnDef="remove">
                <td mat-cell *matCellDef="let element"> 
                    <span matTooltip="Remove Friend" matTooltipPosition="right" (click)="removeFriend(element)" class="material-icons">close</span>
                </td>
            </ng-container>

            <tr mat-row *matRowDef="let row; columns: friendsDisplayedColumns;"></tr>
        </table>
        <br>
        <br>  

        <h1><span style="color:rgb(255, 0, 76)">offline</span></h1>
        <mat-divider></mat-divider>

        <table mat-table [dataSource]="offlineFriends" class="mat-elevation-z0">
            <ng-container matColumnDef="username">
                <td mat-cell *matCellDef="let element"> 
                    <mat-expansion-panel class="mat-elevation-z0" hideToggle>
                        <mat-expansion-panel-header>
                            {{element.username}}
                        </mat-expansion-panel-header>
                        <ng-template matExpansionPanelContent>
                            <mat-form-field class="offlineInput">
                                <mat-label>Chat</mat-label>
                                <textarea (keydown.enter)="sendMessage(element, offlineInput, $event)" cdkTextareaAutosize matInput maxlength="250" #offlineInput></textarea>
                                <mat-hint class="offlineHint" align="end">{{offlineInput.value.length || 0}}/250</mat-hint>
                            </mat-form-field>
                            <span (click)="sendMessage(element, offlineInput)" matTooltip="Send Message" matTooltipPosition="right" class="material-icons">send</span>
                        </ng-template>
                    </mat-expansion-panel>
                </td>
            </ng-container>

            <ng-container matColumnDef="remove">
                <td mat-cell *matCellDef="let element"> 
                    <span matTooltip="Remove Friend" matTooltipPosition="right" (click)="removeFriend(element)" class="material-icons">close</span>
                </td>
            </ng-container>

            <tr mat-row *matRowDef="let row; columns: friendsDisplayedColumns;"></tr>
          </table>
          <br>
          <br>  

          <h1><span style="color:rgba(236, 232, 0, 0.884)">pending</span></h1>
          <mat-divider></mat-divider>
          
          <table mat-table [dataSource]="outboundFriendRequests" class="mat-elevation-z0">

            <ng-container matColumnDef="username">
              <td mat-cell *matCellDef="let element"> {{element.to.username}} </td>
            </ng-container>

            <ng-container matColumnDef="reject">
                <td mat-cell *matCellDef="let element">
                    <span (click)="revokeFriendRequest(element)" class="material-icons">close</span>
                </td>
            </ng-container>
          
            <tr mat-row *matRowDef="let row; columns: outboundFriendRequestsDisplayedColumns;"></tr>
        </table>
        <br>
        <br>
    </mat-drawer>
    <app-home></app-home>
</mat-drawer-container>
